---
sidebar: sidebar 
permalink: br-use-vmware-restore.html 
keywords: restore, vmware, vm, virtual machine, snapshots, object storage, cloud storage, backing up, back up, backup, backup application data, Amazon Web services, AWS, NetApp Backup and Recovery, Oracle database, Microsoft SQL Server database, SAP HANA database 
summary: NetApp NetApp Backup and Recoveryを使用して VMware ワークロードを保護します。 
---
= NetApp Backup and Recoveryで VMware ワークロードを復元する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Backup and Recoveryを使用して、スナップショット、セカンダリ ストレージに複製されたワークロード バックアップ、またはオブジェクト ストレージに保存されたバックアップから VMware ワークロードを復元します。

.これらの場所から復元
異なる開始場所からワークロードを復元できます。

* プライマリロケーション（ローカルスナップショット）からの復元
* セカンダリストレージ上の複製されたリソースから復元する
* オブジェクトストレージバックアップからの復元


.これらのポイントに復元する
以下のポイントまでデータを復元できます:

* *元の場所に復元*: VM は元の場所、同じ vCenter 展開、ESXi ホスト、およびデータストアに復元されます。VM とそのすべてのデータが上書きされます。
* *別の場所に復元*: VM の復元先として、別の vCenter、ESXi ホスト、またはデータストアを選択できます。これは、異なる場所や状態にある同じ VM の異なるコピーを管理するのに役立ちます。


.オブジェクトストレージからの復元に関する考慮事項
オブジェクト ストレージ内のバックアップ ファイルに対して Ransomware Resilience が有効になっている場合は、復元する前に追加のチェックを実行するように求められます。スキャンを実行することをお勧めします。


TIP: バックアップ ファイルにアクセスするには、クラウド プロバイダーに追加料金を支払う必要がある場合があります。



== ワークロードの復元の仕組み

ワークロードを復元すると、次のことが起こります。

* ローカル バックアップ ファイルからワークロードを復元すると、 NetApp Backup and Recovery はバックアップのデータを使用して新しいリソースを作成します。
* 複製されたワークロードから復元する場合、ワークロードを元のシステムまたはオンプレミスのONTAPシステムに復元できます。
+
image:diagram_browse_restore_volume-unified.png["リソースを復元する流れを示す図"]

* オブジェクト ストレージからバックアップを復元する場合、データを元のシステムまたはオンプレミスのONTAPシステムに復元できます。


[復元] ページ (検索と復元) では、正確な名前、場所、または最終日付を覚えていなくても、フィルターを使用してスナップショットを検索することでリソースを復元できます。



== 復元オプション（検索と復元）からワークロード データを復元します。

復元オプションを使用して VMware ワークロードを復元します。スナップショットは、名前またはフィルターを使用して検索できます。

*必要なNetApp Consoleロール* ストレージ ビューアー、バックアップおよびリカバリ スーパー管理者、バックアップおよびリカバリ リストア管理者ロール。 https://docs.netapp.com/us-en/console-setup-admin/reference-iam-predefined-roles.html["すべてのサービスに対するNetApp Consoleのアクセスロールについて学習します"^] 。

.手順
. NetApp Backup and Recoveryメニューから、[復元] を選択します。
. 名前検索フィールドの右側にあるドロップダウン リストから、*VMware* を選択します。
. 復元するリソースの名前を入力するか、復元するリソースが配置されている vCenter、データセンター、またはデータストアでフィルタリングします。
+
検索条件に一致する仮想マシンのリストが表示されます。

. リストから復元する VM を見つけて、その VM の *仮想マシンの復元* ボタンを選択します。
+
その仮想マシン上に作成されたスナップショット (復元ポイント) のリストが表示されます。

. 復元するスナップショットのチェックボックスを有効にします。
. *次へ*を選択します。
+
スナップショットの場所のオプションが表示されます。

. スナップショットの復元先を選択します。
+
** *ローカル*: ローカルの場所からスナップショットを復元します。
** *セカンダリ*: リモート ストレージの場所からスナップショットを復元します。
+
セカンダリ ストレージを選択した場合は、データとログの両方のソースと宛先の場所を入力します。



. *次へ* を選択して、復元先設定ページに進みます。
. 宛先設定と復元前および復元後のオプションを選択します。


[discrete]
===== 目的地の選択

[role="tabbed-block"]
====
.元の場所へのリストア
--
元の場所に復元する場合、宛先の vCenter、ESXi ホスト、データストア、または VM の名前を変更することはできません。復元操作により元の VM が上書きされます。

. *元の場所* ペインを選択します。
. 次のいずれかのオプションを選択します。
+
** *復元前オプション*セクション:
+
*** *プレスクリプト*: 復元操作を開始する前にカスタム スクリプトを実行して追加のタスクを自動化するには、このオプションを有効にします。実行するスクリプトの完全なパスと、スクリプトが受け取る引数を入力します。


** *復元後のオプション*セクション:
+
*** *仮想マシンを再起動*: 復元操作が完了し、復元後のスクリプトが適用された後に仮想マシンを再起動するには、このオプションを有効にします。
*** *Postscript*: 復元が完了した後にカスタム スクリプトを実行して追加のタスクを自動化するには、このオプションを有効にします。実行するスクリプトの完全なパスと、スクリプトが受け取る引数を入力します。




. *復元*を選択します。


--
.別の場所へのリストア
--
別の場所に復元する場合は、宛先の vCenter、ESXi ホスト、データストア、および VM の名前を変更して、別の場所または別の名前で VM の新しいコピーを作成できます。

. *代替の場所* ペインを選択します。
. 次の情報を入力してください。
+
** *宛先設定*セクション:
+
*** *vCenter FQDN または IP アドレス*: スナップショットを復元する vCenter サーバーを選択します。
*** *ESXi ホスト*: スナップショットを復元するホストを選択します。
*** *ネットワーク*: スナップショットを復元するネットワークを選択します。
*** *データストア*: スナップショットを復元するデータストアの名前を入力します。
*** *仮想マシン名*: スナップショットを復元する仮想マシンの名前を入力します。名前がデータストア内に既に存在する VM と一致する場合、Backup and Recovery は現在のタイムスタンプを追加して名前を一意にします。


** *復元前オプション*セクション:
+
*** *プレスクリプト*: 復元操作を開始する前にカスタム スクリプトを実行して追加のタスクを自動化するには、このオプションを有効にします。実行するスクリプトの完全なパスと、スクリプトが受け取る引数を入力します。


** *復元後のオプション*セクション:
+
*** *仮想マシンを再起動*: 復元操作が完了し、復元後のスクリプトが適用された後に仮想マシンを再起動するには、このオプションを有効にします。
*** *Postscript*: 復元が完了した後にカスタム スクリプトを実行して追加のタスクを自動化するには、このオプションを有効にします。実行するスクリプトの完全なパスと、スクリプトが受け取る引数を入力します。




. *復元*を選択します。


--
====
ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]

ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]
